document.querySelectorAll(".select").forEach(e=>{const t=e.querySelector(".select__button"),n=e.querySelector(".select__dropdown"),c=n.querySelectorAll("li"),l=t.querySelector(".selected__value");let r=-1;l.textContent=c[0].innerText.trim();const s=(e=null)=>{const l=null!==e?e:n.classList.contains("hidden");n.classList.toggle("hidden",!l),t.setAttribute("aria-expanded",l),l?(r=[...c].findIndex(e=>e.classList.contains("selected")),r=-1===r?0:r,o()):(r=-1,t.focus())},o=()=>{c.forEach((e,t)=>{e&&(e.setAttribute("tabindex",t===r?"0":"-1"),t===r&&e.focus())})},d=e=>{c.forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),l.textContent=e.textContent.trim()};c.forEach(e=>{e.addEventListener("click",()=>{d(e),s(!1)})}),t.addEventListener("click",()=>{s()}),t.addEventListener("keydown",e=>{"ArrowDown"===e.key?(e.preventDefault(),s(!0)):"Escape"===e.key&&s(!1)}),n.addEventListener("keydown",e=>{"ArrowDown"===e.key?(e.preventDefault(),r=(r+1)%c.length,o()):"ArrowUp"===e.key?(e.preventDefault(),r=(r-1+c.length)%c.length,o()):"Enter"===e.key||" "===e.key?(e.preventDefault(),d(c[r]),s(!1)):"Escape"===e.key&&s(!1)}),document.addEventListener("click",t=>{!e.contains(t.target)&&s(!1)})});
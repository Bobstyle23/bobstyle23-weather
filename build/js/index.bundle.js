(()=>{"use strict";var e={283:(e,t,a)=>{a.d(t,{O:()=>r});const r={clear:[0,1],cloudy:[2,3],fog:[45,48],drizzle:[51,53,55],rain:[61,63,65,80,81,82],snow:[71,73,75],thunderstorm:[95,96,99]}},359:(e,t,a)=>{a.d(t,{X:()=>r});class r{constructor(){}async fetchLocationData(e){const t=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}`);return await t.json()}async fetchWeatherData(e){const{latitude:t,longitude:a,temperatureUnit:r="celsius",windspeed:o="kmh",precipitation:n="mm"}=e,s=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${a}&hourly=temperature_2m,apparent_temperature,relative_humidity_2m,precipitation,weathercode,windspeed_10m,cloudcover,uv_index\n&daily=temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,sunrise,sunset,precipitation_sum,uv_index_max\n&temperature_unit=${r}\n&windspeed_unit=${o}\n&precipitation_unit=${n}\n&timezone=auto`,i=await fetch(s);return await i.json()}}},886:(e,t,a)=>{a.d(t,{BF:()=>o});var r=a(283);new class{constructor(){this.observables=[]}subscribe(e){this.observables.push(e)}unsubscribe(e){this.observables=this.observables.filter(t=>t!==e)}notify(e){this.observables.forEach(t=>t(e))}};const o=new class{constructor(){}getWeatherGroupByCode(e){for(const[t,a]of Object.entries(r.O))if(a.includes(e))return t;return"unknown"}debounce(e,t){let a;return function(...r){clearTimeout(a),a=setTimeout(()=>e(...r),t)}}}}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=a(359),o=a(886);const n=new WeakMap;class s{constructor(){this.cacheDOM(),this.bindEvents(),this.getUsersLocation(),this.getUsersTime()}static weatherData=new r.X;static searchValue="";static userCurrentData={latitude:null,longitude:null,dateAndTime:null};set locationData(e){n.set(this,e)}get locationData(){return n.get(this)}cacheDOM(){this.searchField=document.querySelector(".search__field"),this.searchBtn=document.querySelector(".search__btn")}bindEvents(){const e=o.BF.debounce(e=>{this.getLocationData(e.target.value)},500);this.searchField.addEventListener("input",t=>{s.searchValue=t.target.value,e(t)}),this.searchBtn.addEventListener("click",()=>this.getWeatherDataByLocation({latitude:this.locationData[0].latitude,longitude:this.locationData[0].longitude}))}getLocationData(e){s.weatherData.fetchLocationData(e).then(e=>{this.locationData=e.results,console.log(e.results)})}getWeatherDataByLocation(e){s.weatherData.fetchWeatherData(e).then(e=>{console.log(e)})}getUsersLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,a=e.coords.longitude;s.userCurrentData.latitude=t,s.userCurrentData.longitude=a,console.log(s.userCurrentData)},e=>{switch(e.code){case e.PERMISSION_DENIED:console.error("User denied the request for geolocation");break;case e.POSITION_UNAVAILABLE:console.error("Location information unavailable");break;case e.TIMEOUT:console.error("The request to get user location timed out");break;default:console.error("Unknown error occured.")}}):console.error("geolocation is not supporter by this browser")}getUsersTime(){const e=(new Date).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});s.userCurrentData.dateAndTime=e.split(","),console.log(s.userCurrentData)}}new s})();